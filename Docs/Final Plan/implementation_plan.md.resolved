# ğŸ“‹ LABA ERP - Káº¾ HOáº CH CHI TIáº¾T PHASE 1

## ğŸ¯ Tá»•ng Quan Phase 1: Core ERP Mini

**Má»¥c tiÃªu:** XÃ¢y dá»±ng há»‡ thá»‘ng ERP mini cÆ¡ báº£n vá»›i 9 tasks  
**Thá»i gian:** 38-49 giá» (~1-1.5 tuáº§n)  
**Äá»‘i tÆ°á»£ng:** Chá»§ nÃ´ng tráº¡i lá»›n tuá»•i, Ã­t rÃ nh cÃ´ng nghá»‡

---

## ğŸ“Š SÆ  Äá»’ Káº¾T Ná»I GIá»®A CÃC TASKS

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          PHASE 1 TASK FLOW                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ TASK 1: Setup Project & Database Schema                           â”‚  â”‚
â”‚  â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                            â”‚  â”‚
â”‚  â”‚ Output: Prisma schema + Seed data                                  â”‚  â”‚
â”‚  â”‚ Tables: Farm, User, Account, Product, Partner,                     â”‚  â”‚
â”‚  â”‚         Transaction, TransactionItem, Worker, WorkLog, Invoice    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                                          â”‚
â”‚                              â–¼                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ TASK 2: Authentication                                             â”‚  â”‚
â”‚  â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                            â”‚  â”‚
â”‚  â”‚ Input:  Users table tá»« Task 1                                      â”‚  â”‚
â”‚  â”‚ Output: JWT Token, Session management                              â”‚  â”‚
â”‚  â”‚ APIs:   POST /api/auth/register                                    â”‚  â”‚
â”‚  â”‚         POST /api/auth/login                                       â”‚  â”‚
â”‚  â”‚         GET  /api/auth/me                                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                                          â”‚
â”‚                              â–¼                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ TASK 3: Farm & User Management + Dynamic Labels                    â”‚  â”‚
â”‚  â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                    â”‚  â”‚
â”‚  â”‚ Input:  Auth context tá»« Task 2                                     â”‚  â”‚
â”‚  â”‚ Output: Farm settings, Business Type labels                        â”‚  â”‚
â”‚  â”‚ APIs:   GET/PUT /api/farms/:id                                     â”‚  â”‚
â”‚  â”‚         GET/PUT /api/users/:id                                     â”‚  â”‚
â”‚  â”‚ Hook:   useLabel() - FARM vs RETAIL_FNB                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                                          â”‚
â”‚                              â–¼                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ TASK 4: Products & Partners                                        â”‚  â”‚
â”‚  â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                        â”‚  â”‚
â”‚  â”‚ Input:  Farm context tá»« Task 3                                     â”‚  â”‚
â”‚  â”‚ Output: Master data cho Transactions                               â”‚  â”‚
â”‚  â”‚ APIs:   CRUD /api/products, CRUD /api/partners                     â”‚  â”‚
â”‚  â”‚ Notes:  Partner cÃ³ flag is_customer / is_supplier                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                                          â”‚
â”‚                              â–¼                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ TASK 5: Transactions - Thu/Chi Tiá»n                                â”‚  â”‚
â”‚  â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                â”‚  â”‚
â”‚  â”‚ Input:  Products, Partners tá»« Task 4                               â”‚  â”‚
â”‚  â”‚         Account list tá»« Task 1 seed                                â”‚  â”‚
â”‚  â”‚ Output: Transaction records, Document numbers                      â”‚  â”‚
â”‚  â”‚ APIs:   CRUD /api/transactions                                     â”‚  â”‚
â”‚  â”‚ Types:  CASH_IN, CASH_OUT, BANK_TRANSFER                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                                          â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚          â”‚                   â”‚                   â”‚                      â”‚
â”‚          â–¼                   â–¼                   â–¼                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ TASK 6          â”‚ â”‚ TASK 7          â”‚ â”‚ TASK 9          â”‚            â”‚
â”‚  â”‚ BÃ¡n/Mua hÃ ng    â”‚ â”‚ Workers         â”‚ â”‚ OCR             â”‚            â”‚
â”‚  â”‚ + CÃ´ng ná»£       â”‚ â”‚ + Thuáº¿ TNCN     â”‚ â”‚ Integration     â”‚            â”‚
â”‚  â”‚                 â”‚ â”‚                 â”‚ â”‚                 â”‚            â”‚
â”‚  â”‚ Input:          â”‚ â”‚ Input:          â”‚ â”‚ Input:          â”‚            â”‚
â”‚  â”‚ - Products      â”‚ â”‚ - Workers table â”‚ â”‚ - Image upload  â”‚            â”‚
â”‚  â”‚ - Partners      â”‚ â”‚ - WorkLogs      â”‚ â”‚                 â”‚            â”‚
â”‚  â”‚ - Trans API     â”‚ â”‚ - Trans API     â”‚ â”‚ Output:         â”‚            â”‚
â”‚  â”‚                 â”‚ â”‚                 â”‚ â”‚ - Extract data  â”‚            â”‚
â”‚  â”‚ Output:         â”‚ â”‚ Output:         â”‚ â”‚ - Auto-fill formâ”‚            â”‚
â”‚  â”‚ - SALE trans    â”‚ â”‚ - Payroll trans â”‚ â”‚                 â”‚            â”‚
â”‚  â”‚ - PURCHASE transâ”‚ â”‚ - PIT calc      â”‚ â”‚ API:            â”‚            â”‚
â”‚  â”‚ - AP records    â”‚ â”‚                 â”‚ â”‚ POST /api/ocr   â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚           â”‚                   â”‚                   â”‚                      â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                               â”‚                                          â”‚
â”‚                               â–¼                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ TASK 8: Dashboard & Reports                                        â”‚  â”‚
â”‚  â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                        â”‚  â”‚
â”‚  â”‚ Input:  Táº¥t cáº£ dá»¯ liá»‡u tá»« Task 5, 6, 7                             â”‚  â”‚
â”‚  â”‚ Output: Summary cards, Charts, Basic reports                       â”‚  â”‚
â”‚  â”‚ APIs:   GET /api/dashboard/summary                                 â”‚  â”‚
â”‚  â”‚         GET /api/dashboard/chart-data                              â”‚  â”‚
â”‚  â”‚         GET /api/reports/...                                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ CHI TIáº¾T Tá»ªNG TASK Vá»šI Káº¾T Ná»I

### Task 1: Setup Project & Database Schema (3-4 giá»)

#### Má»¥c tiÃªu
Táº¡o ná»n táº£ng cho toÃ n bá»™ há»‡ thá»‘ng

#### Inputs
- KhÃ´ng cÃ³ (task Ä‘áº§u tiÃªn)

#### Outputs cho cÃ¡c Tasks sau
| Output | Sá»­ dá»¥ng bá»Ÿi |
|--------|-------------|
| `User` table | Task 2 (Auth) |
| `Farm` table | Task 3 (Farm Settings) |
| `Product` table | Task 4, 6, 8 |
| `Partner` table | Task 4, 5, 6, 7 |
| `Transaction` table | Task 5, 6, 7, 8 |
| `Worker`, `WorkLog` tables | Task 7 |
| `Invoice` table | Task 9 (OCR) |
| `Account` seed data | Task 5, 6, 7 (cho háº¡ch toÃ¡n) |
| `TaxRate` seed data | Task 6, 7 (cho thuáº¿ VAT, TNCN) |

#### Schema cáº§n táº¡o
```prisma
// Core
model Farm { ... }
model User { ... }
model Account { ... }    // Há»‡ thá»‘ng tÃ i khoáº£n káº¿ toÃ¡n

// Master Data
model Product { ... }
model Partner { ... }    // KhÃ¡ch hÃ ng + NhÃ  cung cáº¥p

// Transactions
model Transaction { ... }
model TransactionItem { ... }

// Labor
model Worker { ... }
model WorkLog { ... }

// OCR
model Invoice { ... }

// Tax (seed data)
model TaxRate { ... }
```

#### Seed Data (Quan trá»ng cho P2+)
```
accounts:
  - 111: Tiá»n máº·t
  - 112: Tiá»n gá»­i ngÃ¢n hÃ ng
  - 131: Pháº£i thu khÃ¡ch hÃ ng
  - 156: HÃ ng hÃ³a
  - 331: Pháº£i tráº£ nhÃ  cung cáº¥p
  - 511: Doanh thu
  - 632: GiÃ¡ vá»‘n
  - 642: Chi phÃ­ quáº£n lÃ½
  ...

tax_rates:
  - VAT_10: 10%
  - VAT_5: 5%
  - VAT_0: 0%
  - PIT_THRESHOLD: 2,000,000Ä‘
```

#### Káº¿t ná»‘i vá»›i Phase 2
> [!IMPORTANT]
> Schema Task 1 Ä‘Ã£ bao gá»“m cÃ¡c trÆ°á»ng dá»± phÃ²ng cho:
> - `stocks`, `stock_movements` (Phase 2)
> - `ar_transactions`, `ap_transactions` (Phase 2)
> - `vat_declarations` (Phase 2)
> - CÃ¡c fields nhÆ° `vat_amount`, `cogs`, `is_posted` trong Transaction

#### Checklist hoÃ n thÃ nh
- [ ] Next.js 14 project initialized
- [ ] Prisma + PostgreSQL configured
- [ ] All tables created
- [ ] Seed data: Accounts, Tax Rates
- [ ] `npm run build` khÃ´ng lá»—i

---

### Task 2: Authentication (3-4 giá»)

#### Má»¥c tiÃªu
XÃ¡c thá»±c ngÆ°á»i dÃ¹ng + báº£o vá»‡ routes

#### Dependencies
| Tá»« Task | Cáº§n gÃ¬ |
|---------|--------|
| Task 1 | `User` table, `Farm` table |

#### Outputs cho cÃ¡c Tasks sau
| Output | Sá»­ dá»¥ng bá»Ÿi |
|--------|-------------|
| JWT Token | Táº¥t cáº£ API tá»« Task 3-9 |
| `user_id` trong context | Query filter cho toÃ n bá»™ data |
| `farm_id` trong context | Multi-tenant support |
| Protected middleware | Táº¥t cáº£ routes |

#### APIs
```typescript
// POST /api/auth/register
// Input: { email, password, name, phone, business_type }
// Output: { token, user, farm }

// POST /api/auth/login  
// Input: { email, password }
// Output: { token, user, farm }

// GET /api/auth/me
// Header: Authorization: Bearer <token>
// Output: { user, farm }

// POST /api/auth/logout
// Output: { success: true }
```

#### Flow Ä‘Äƒng kÃ½
```
User nháº­p thÃ´ng tin
       â†“
Chá»n Business Type (FARM hoáº·c RETAIL_FNB)
       â†“
Táº¡o User + Táº¡o Farm máº·c Ä‘á»‹nh
       â†“
Return JWT token
       â†“
Redirect to Dashboard
```

#### Káº¿t ná»‘i vá»›i Phase 4
> [!NOTE]
> Phase 4 sáº½ má»Ÿ rá»™ng:
> - Session management vá»›i `user_sessions` table
> - Failed login tracking
> - Refresh token
> - RBAC (Role-Based Access Control)

#### Checklist hoÃ n thÃ nh
- [ ] Register API + UI hoáº¡t Ä‘á»™ng
- [ ] Login API + UI hoáº¡t Ä‘á»™ng
- [ ] JWT token Ä‘Æ°á»£c lÆ°u trong cookie/localStorage
- [ ] Protected routes redirect vá» login náº¿u chÆ°a auth
- [ ] business_type Ä‘Æ°á»£c lÆ°u vÃ o Farm

---

### Task 3: Farm & User Management + Dynamic Labels (2-3 giá»)

#### Má»¥c tiÃªu
CÃ i Ä‘áº·t thÃ´ng tin Farm + Labels Ä‘á»™ng theo loáº¡i hÃ¬nh

#### Dependencies
| Tá»« Task | Cáº§n gÃ¬ |
|---------|--------|
| Task 1 | `Farm`, `User` tables |
| Task 2 | Auth context, user_id, farm_id |

#### Outputs cho cÃ¡c Tasks sau
| Output | Sá»­ dá»¥ng bá»Ÿi |
|--------|-------------|
| Farm settings | Táº¥t cáº£ UI (header, reports) |
| `useLabel()` hook | Task 4 (Product â†’ "NÃ´ng sáº£n" vs "HÃ ng hÃ³a") |
| | Task 6 ("BÃ¡n rau" vs "BÃ¡n hÃ ng") |
| | Task 7 ("Thá»£ gáº·t" vs "NhÃ¢n viÃªn") |

#### Dynamic Labels
```typescript
// src/config/labels.ts
const labels = {
  FARM: {
    product: "NÃ´ng sáº£n",
    partner_customer: "ThÆ°Æ¡ng lÃ¡i",
    partner_supplier: "Äáº¡i lÃ½ váº­t tÆ°",
    worker: "Thá»£",
    sale: "Thu hoáº¡ch & BÃ¡n",
    purchase: "Mua váº­t tÆ°"
  },
  RETAIL_FNB: {
    product: "HÃ ng hÃ³a",
    partner_customer: "KhÃ¡ch hÃ ng",
    partner_supplier: "NhÃ  cung cáº¥p",
    worker: "NhÃ¢n viÃªn",
    sale: "BÃ¡n hÃ ng",
    purchase: "Nháº­p hÃ ng"
  }
}

// Hook useLabel()
function useLabel() {
  const { farm } = useFarm();
  const type = farm?.business_type || 'FARM';
  return (key: string) => labels[type][key];
}
```

#### Checklist hoÃ n thÃ nh
- [ ] Trang CÃ i Ä‘áº·t cÃ¡ nhÃ¢n
- [ ] Trang CÃ i Ä‘áº·t Farm
- [ ] `useLabel()` hook hoáº¡t Ä‘á»™ng
- [ ] UI hiá»ƒn thá»‹ labels Ä‘Ãºng theo business_type

---

### Task 4: Products & Partners (4-5 giá»)

#### Má»¥c tiÃªu
Quáº£n lÃ½ sáº£n pháº©m vÃ  Ä‘á»‘i tÃ¡c - Master data cho giao dá»‹ch

#### Dependencies
| Tá»« Task | Cáº§n gÃ¬ |
|---------|--------|
| Task 1 | `Product`, `Partner` tables |
| Task 2 | Auth context |
| Task 3 | Dynamic labels, Farm context |

#### Outputs cho cÃ¡c Tasks sau
| Output | Sá»­ dá»¥ng bá»Ÿi |
|--------|-------------|
| Product list | Task 6 (BÃ¡n hÃ ng - chá»n SP) |
| | Task 8 (Dashboard - top products) |
| Partner list (customers) | Task 5, 6 (Thu tiá»n, BÃ¡n hÃ ng) |
| Partner list (suppliers) | Task 6 (Mua hÃ ng) |
| | Task 7 (Optional - liÃªn káº¿t Workers) |

#### Partner Model
```typescript
interface Partner {
  id: string;
  farm_id: string;
  name: string;
  phone?: string;
  address?: string;
  tax_code?: string;           // MST - quan trá»ng cho Phase 2 VAT
  is_customer: boolean;        // CÃ³ thá»ƒ lÃ  khÃ¡ch hÃ ng
  is_supplier: boolean;        // CÃ³ thá»ƒ lÃ  nhÃ  cung cáº¥p
  credit_limit?: number;       // Háº¡n má»©c cÃ´ng ná»£
  balance_ar: number;          // Sá»‘ dÆ° pháº£i thu â†’ Phase 2
  balance_ap: number;          // Sá»‘ dÆ° pháº£i tráº£ â†’ Phase 2
}
```

#### Káº¿t ná»‘i vá»›i Phase 2
> [!IMPORTANT]
> Partner.tax_code sáº½ Ä‘Æ°á»£c validate trong Phase 2 Task 8 (VAT Declaration)

#### Checklist hoÃ n thÃ nh
- [ ] CRUD Products hoáº¡t Ä‘á»™ng
- [ ] CRUD Partners hoáº¡t Ä‘á»™ng
- [ ] Filter customers / suppliers
- [ ] Search báº±ng tÃªn, Ä‘iá»‡n thoáº¡i
- [ ] Labels hiá»ƒn thá»‹ Ä‘Ãºng (NÃ´ng sáº£n vs HÃ ng hÃ³a)

---

### Task 5: Transactions - Thu/Chi Tiá»n (5-6 giá»)

#### Má»¥c tiÃªu  
Ghi nháº­n thu chi Ä‘Æ¡n giáº£n (chÆ°a cÃ³ bÃ¡n hÃ ng)

#### Dependencies
| Tá»« Task | Cáº§n gÃ¬ |
|---------|--------|
| Task 1 | `Transaction`, `Account` tables |
| Task 2 | Auth context |
| Task 4 | Partners (Ä‘á»ƒ link ngÆ°á»i liÃªn quan) |

#### Outputs cho cÃ¡c Tasks sau
| Output | Sá»­ dá»¥ng bá»Ÿi |
|--------|-------------|
| Transaction records | Task 8 (Dashboard - tá»•ng thu chi) |
| Document number logic | Task 6, 7 (reuse mÃ£ chá»©ng tá»«) |
| Transaction service | Task 6, 7 (extend cho SALE, PAYROLL) |

#### Transaction Types (Phase 1)
```typescript
enum TransactionType {
  CASH_IN = 'CASH_IN',           // Thu tiá»n
  CASH_OUT = 'CASH_OUT',         // Chi tiá»n  
  BANK_TRANSFER = 'BANK_TRANSFER' // Chuyá»ƒn khoáº£n
}
```

#### Document Number Format
```
PT-2024-0001  // Phiáº¿u thu
PC-2024-0001  // Phiáº¿u chi
CK-2024-0001  // Chuyá»ƒn khoáº£n
```

#### Káº¿t ná»‘i vá»›i Phase 2
> [!NOTE]
> Transaction sáº½ Ä‘Æ°á»£c má»Ÿ rá»™ng vá»›i:
> - AUTO_STOCK_IN, AUTO_STOCK_OUT (tá»± Ä‘á»™ng tá»« kho)
> - AR_PAYMENT, AP_PAYMENT (cÃ´ng ná»£)
> - VAT_PAYMENT (ná»™p thuáº¿)

#### Checklist hoÃ n thÃ nh
- [ ] Form Thu tiá»n hoáº¡t Ä‘á»™ng
- [ ] Form Chi tiá»n hoáº¡t Ä‘á»™ng  
- [ ] Tá»± Ä‘á»™ng sinh sá»‘ chá»©ng tá»«
- [ ] Danh sÃ¡ch giao dá»‹ch vá»›i filter
- [ ] Link vá»›i Partner (tÃ¹y chá»n)

---

### Task 6: BÃ¡n hÃ ng / Mua hÃ ng + CÃ´ng ná»£ (7-9 giá»)

#### Má»¥c tiÃªu
BÃ¡n hÃ ng vá»›i nhiá»u items + Mua hÃ ng táº¡o cÃ´ng ná»£ NCC

#### Dependencies
| Tá»« Task | Cáº§n gÃ¬ |
|---------|--------|
| Task 1 | `TransactionItem` table |
| Task 4 | Products (Ä‘á»ƒ chá»n SP), Partners (KH/NCC) |
| Task 5 | Transaction service, Document number |

#### Outputs cho cÃ¡c Tasks sau
| Output | Sá»­ dá»¥ng bá»Ÿi |
|--------|-------------|
| SALE transactions | Task 8 (Dashboard - doanh thu) |
| PURCHASE transactions | Task 8 (Dashboard - chi phÃ­) |
| AP balance (cÃ´ng ná»£ NCC) | Task 8 (Dashboard - ná»£ pháº£i tráº£) |

#### Luá»“ng BÃ¡n hÃ ng
```
Chá»n sáº£n pháº©m(s)
       â†“
Nháº­p sá»‘ lÆ°á»£ng, Ä‘Æ¡n giÃ¡
       â†“
Chá»n khÃ¡ch hÃ ng (optional)
       â†“
Chá»n phÆ°Æ¡ng thá»©c: Tiá»n máº·t / CÃ´ng ná»£
       â†“
Táº¡o Transaction type=SALE
       â†“
Náº¿u CÃ´ng ná»£ â†’ Cáº­p nháº­t Partner.balance_ar
```

#### Luá»“ng Mua hÃ ng (CÃ³ cÃ´ng ná»£)
```
Chá»n sáº£n pháº©m(s)
       â†“
Nháº­p sá»‘ lÆ°á»£ng, Ä‘Æ¡n giÃ¡
       â†“
Chá»n nhÃ  cung cáº¥p
       â†“
Nháº­p sá»‘ tiá»n tráº£ ngay (cÃ³ thá»ƒ = 0)
       â†“
Táº¡o Transaction type=PURCHASE
       â†“
TÃ­nh cÃ´ng ná»£ = Total - ÄÃ£ tráº£
       â†“
Cáº­p nháº­t Partner.balance_ap
```

#### Káº¿t ná»‘i vá»›i Phase 2
> [!IMPORTANT]
> Phase 2 sáº½:
> - Task 2: Tá»± Ä‘á»™ng táº¡o StockMovement khi mua/bÃ¡n
> - Task 4, 5: Migrate balance_ar/balance_ap sang báº£ng AR/AP riÃªng
> - ThÃªm tÃ­nh nÄƒng tráº£ cÃ´ng ná»£ tá»«ng pháº§n (partial payment)

#### Checklist hoÃ n thÃ nh
- [ ] Form BÃ¡n hÃ ng vá»›i nhiá»u items
- [ ] Form Mua hÃ ng vá»›i partial payment
- [ ] CÃ´ng ná»£ NCC Ä‘Æ°á»£c lÆ°u Ä‘Ãºng
- [ ] MÃ n hÃ¬nh Tráº£ ná»£ NCC
- [ ] VAT Ä‘Æ°á»£c tÃ­nh tá»± Ä‘á»™ng theo TaxRate

---

### Task 7: Workers & Payroll + Thuáº¿ TNCN (6-8 giá»)

#### Má»¥c tiÃªu
Quáº£n lÃ½ nhÃ¢n cÃ´ng thá»i vá»¥ + TÃ­nh thuáº¿ TNCN

#### Dependencies
| Tá»« Task | Cáº§n gÃ¬ |
|---------|--------|
| Task 1 | `Worker`, `WorkLog` tables |
| Task 5 | Transaction service (táº¡o phiáº¿u chi lÆ°Æ¡ng) |

#### Outputs cho cÃ¡c Tasks sau
| Output | Sá»­ dá»¥ng bá»Ÿi |
|--------|-------------|
| Worker records | Task 8 (Dashboard - chi phÃ­ nhÃ¢n cÃ´ng) |
| WorkLog records | Task 8 (Reports - cÃ´ng nháº­t) |
| PAYROLL transactions | Task 8 (Dashboard - chi phÃ­) |
| PIT calculation logic | Phase 3 Task 7 (PIT Calculator) |

#### Logic Thuáº¿ TNCN (Quy táº¯c 2 triá»‡u)
```typescript
function calculatePIT(grossAmount: number, hasContract: boolean, hasTaxCommitment: boolean) {
  // Thá»£ thá»i vá»¥, má»—i láº§n chi >= 2,000,000Ä‘
  const PIT_THRESHOLD = 2_000_000;
  
  if (grossAmount < PIT_THRESHOLD) {
    return { pitRate: 0, pitAmount: 0, netAmount: grossAmount };
  }
  
  if (hasContract || hasTaxCommitment) {
    // CÃ³ HÄ lao Ä‘á»™ng hoáº·c Cam káº¿t 02 â†’ KhÃ´ng kháº¥u trá»«
    return { pitRate: 0, pitAmount: 0, netAmount: grossAmount };
  }
  
  // Kháº¥u trá»« 10% trÃªn toÃ n bá»™
  const pitRate = 10;
  const pitAmount = grossAmount * 0.1;
  const netAmount = grossAmount - pitAmount;
  
  return { pitRate, pitAmount, netAmount };
}
```

#### HTML Templates (Quan trá»ng)
```
ğŸ“„ contract.html        // Máº«u 08 - Há»£p Ä‘á»“ng giao khoÃ¡n
ğŸ“„ tax-commitment.html  // Máº«u 02/CK-TNCN - Cam káº¿t thuáº¿
ğŸ“„ payroll-sheet.html   // Máº«u 05 - Báº£ng thanh toÃ¡n tiá»n cÃ´ng
```

#### Káº¿t ná»‘i vá»›i Phase 5
> [!NOTE]
> Phase 5 sáº½ má»Ÿ rá»™ng thÃ nh:
> - Employee full management (BHXH, BHYT, BHTN)
> - Payroll auto-calculate vá»›i 7 báº­c thuáº¿
> - Monthly payroll vá»›i NET/GROSS

#### Checklist hoÃ n thÃ nh
- [ ] CRUD Workers hoáº¡t Ä‘á»™ng
- [ ] Cháº¥m cÃ´ng theo ngÃ y (check all/uncheck)
- [ ] Form Tráº£ lÆ°Æ¡ng vá»›i tÃ­nh thuáº¿ TNCN
- [ ] Upload áº£nh chá»©ng tá»« (HÄ, Cam káº¿t)
- [ ] In/Export templates HTML
- [ ] Tá»± Ä‘á»™ng táº¡o Transaction type=PAYROLL

---

### Task 8: Dashboard & Reports (4-5 giá»)

#### Má»¥c tiÃªu
Tá»•ng quan tÃ i chÃ­nh + BÃ¡o cÃ¡o cÆ¡ báº£n

#### Dependencies (Táº¥t cáº£ Ä‘á»• vá» Ä‘Ã¢y)
| Tá»« Task | Cáº§n gÃ¬ |
|---------|--------|
| Task 5 | Thu chi (CASH_IN, CASH_OUT) |
| Task 6 | BÃ¡n hÃ ng (SALE), Mua hÃ ng (PURCHASE), CÃ´ng ná»£ |
| Task 7 | NhÃ¢n cÃ´ng (PAYROLL) |

#### Dashboard Widget Cards
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ’° Thu      â”‚ â”‚ ğŸ’¸ Chi      â”‚ â”‚ ğŸ“Š LÃ£i/Lá»—  â”‚ â”‚ ğŸ’³ CÃ´ng ná»£ â”‚
â”‚ 150,000,000 â”‚ â”‚ 80,000,000  â”‚ â”‚ +70,000,000â”‚ â”‚ -12,000,000â”‚
â”‚ ThÃ¡ng nÃ y   â”‚ â”‚ ThÃ¡ng nÃ y   â”‚ â”‚ ThÃ¡ng nÃ y  â”‚ â”‚ Pháº£i tráº£   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Charts
- Revenue trend (6 thÃ¡ng gáº§n nháº¥t)
- Expense by category (pie chart)
- Top 5 sáº£n pháº©m bÃ¡n cháº¡y

#### Reports (CÆ¡ báº£n)
| Report | MÃ´ táº£ |
|--------|-------|
| Thu chi theo ká»³ | Filter by date range |
| CÃ´ng ná»£ NCC | Danh sÃ¡ch NCC + sá»‘ dÆ° |
| NhÃ¢n cÃ´ng | Tá»•ng há»£p ngÃ y cÃ´ng, tiá»n lÆ°Æ¡ng |

#### Káº¿t ná»‘i vá»›i Phase 2
> [!IMPORTANT]
> Phase 2 Task 6-7 sáº½ má»Ÿ rá»™ng thÃ nh:
> - 8 bÃ¡o cÃ¡o káº¿ toÃ¡n chuáº©n VN
> - Export Excel
> - Tá» khai VAT

#### Checklist hoÃ n thÃ nh
- [ ] Dashboard vá»›i 4 stat cards
- [ ] Chart revenue trend
- [ ] Quick actions (buttons)
- [ ] Danh sÃ¡ch giao dá»‹ch gáº§n nháº¥t
- [ ] Export Excel cÆ¡ báº£n

---

### Task 9: OCR Integration (4-5 giá»)

#### Má»¥c tiÃªu  
Scan hÃ³a Ä‘Æ¡n tá»± Ä‘á»™ng Ä‘iá»n form mua hÃ ng

#### Dependencies
| Tá»« Task | Cáº§n gÃ¬ |
|---------|--------|
| Task 1 | `Invoice` table |
| Task 6 | Form Mua hÃ ng (Ä‘á»ƒ auto-fill) |

#### Outputs
- Extracted data tá»« áº£nh hÃ³a Ä‘Æ¡n
- Invoice record lÆ°u áº£nh + káº¿t quáº£ OCR

#### Flow
```
User chá»¥p áº£nh hÃ³a Ä‘Æ¡n
       â†“
Upload to API /api/ocr
       â†“
Google Cloud Vision xá»­ lÃ½
       â†“
Extract: TÃªn NCC, MST, Items, Amounts, VAT
       â†“
Return JSON
       â†“
Auto-fill Form Mua hÃ ng
       â†“
User confirm & save
```

#### Káº¿t ná»‘i vá»›i Phase 2
> [!NOTE]
> Extracted MST sáº½ Ä‘Æ°á»£c validate trong Phase 2 VAT Declaration

#### Checklist hoÃ n thÃ nh
- [ ] Upload áº£nh hoáº¡t Ä‘á»™ng
- [ ] OCR extract Ä‘Æ°á»£c thÃ´ng tin cÆ¡ báº£n
- [ ] Auto-fill form Mua hÃ ng
- [ ] LÆ°u Invoice record vá»›i áº£nh gá»‘c

---

## ğŸ”— Káº¾T Ná»I PHASE 1 â†’ PHASE 2

### Data sáº½ Ä‘Æ°á»£c sá»­ dá»¥ng trong Phase 2

| Phase 1 Entity | Phase 2 Sá»­ dá»¥ng |
|----------------|-----------------|
| Transaction | Táº¡o StockMovement tá»± Ä‘á»™ng |
| Product | TÃ­nh giÃ¡ vá»‘n bÃ¬nh quÃ¢n |
| Partner | Migrate sang AR/AP transactions |
| Partner.balance_ar | Seed dá»¯ liá»‡u AR |
| Partner.balance_ap | Seed dá»¯ liá»‡u AP |
| Transaction.vat_amount | Tá» khai VAT |
| TaxRate tá»« seed | VAT Declaration |

### APIs sáº½ Ä‘Æ°á»£c má»Ÿ rá»™ng

| Phase 1 API | Phase 2 Má»Ÿ rá»™ng |
|-------------|-----------------|
| POST /api/transactions | ThÃªm auto stock movement |
| GET /api/transactions | ThÃªm filter by stock_status |
| GET /api/partners | ThÃªm AR/AP summary |
| GET /api/products | ThÃªm stock info |

### New Tables (Phase 2)

```prisma
// Sáº½ thÃªm trong Phase 2 Task 1
model Stock { ... }
model StockMovement { ... }
model ARTransaction { ... }
model APTransaction { ... }
model VATDeclaration { ... }
model UserSession { ... }
model AuditLog { ... }
```

---

## âœ… VERIFICATION PLAN

### Automated Tests (Má»—i Task)
```bash
# Unit tests
npm run test

# Type check
npm run build

# Lint
npm run lint
```

### Manual Testing Checklist

#### Task 1-2: Auth Flow
1. Má»Ÿ http://localhost:3000
2. Click "ÄÄƒng kÃ½"
3. Nháº­p email, password, chá»n "NÃ´ng tráº¡i"
4. Submit â†’ Redirect to Dashboard
5. Logout â†’ Login láº¡i

#### Task 3-4: Master Data
1. VÃ o CÃ i Ä‘áº·t â†’ ThÃ´ng tin Farm
2. VÃ o CÃ i Ä‘áº·t â†’ Sáº£n pháº©m â†’ ThÃªm 3 SP
3. VÃ o CÃ i Ä‘áº·t â†’ Äá»‘i tÃ¡c â†’ ThÃªm 2 KH + 2 NCC

#### Task 5: Thu Chi
1. Click "Thu tiá»n" â†’ Nháº­p 1 triá»‡u â†’ LÆ°u
2. Click "Chi tiá»n" â†’ Nháº­p 500k â†’ LÆ°u
3. Check danh sÃ¡ch giao dá»‹ch

#### Task 6: BÃ¡n/Mua
1. BÃ¡n hÃ ng â†’ Chá»n 2 SP â†’ LÆ°u
2. Mua hÃ ng â†’ Chá»n NCC â†’ Thanh toÃ¡n 50% â†’ Check cÃ´ng ná»£

#### Task 7: NhÃ¢n cÃ´ng
1. ThÃªm 2 thá»£
2. Cháº¥m cÃ´ng 3 ngÃ y
3. Tráº£ lÆ°Æ¡ng 2.5 triá»‡u â†’ Check thuáº¿ TNCN

#### Task 8: Dashboard
1. Xem Dashboard â†’ Check cÃ¡c sá»‘ liá»‡u khá»›p

---

## ğŸ“‹ Káº¾T LUáº¬N

Phase 1 táº¡o ná»n táº£ng vá»¯ng cháº¯c cho toÃ n bá»™ há»‡ thá»‘ng LABA ERP:

1. **Database schema** Ä‘Ã£ tÃ­nh trÆ°á»›c cÃ¡c trÆ°á»ng cho Phase 2+
2. **Auth system** ready cho viá»‡c má»Ÿ rá»™ng Security á»Ÿ Phase 4
3. **Transaction service** sáº½ Ä‘Æ°á»£c extend, khÃ´ng cáº§n viáº¿t láº¡i
4. **Workers module** lÃ  tiá»n Ä‘á» cho Payroll Auto á»Ÿ Phase 5
5. **Dynamic labels** Ä‘áº£m báº£o UX nháº¥t quÃ¡n giá»¯a FARM vÃ  F&B

> [!TIP]
> Khi lÃ m Phase 1, luÃ´n nghÄ© Ä‘áº¿n viá»‡c dá»¯ liá»‡u sáº½ Ä‘Æ°á»£c dÃ¹ng nhÆ° tháº¿ nÃ o á»Ÿ cÃ¡c Phase sau.

---

**PhiÃªn báº£n:** 1.0  
**NgÃ y táº¡o:** 17/12/2024  
**TÃ¡c giáº£:** LABA Team

---

# ğŸ“‹ PHASE 2: INVENTORY + AR/AP + REPORTS

## ğŸ¯ Tá»•ng Quan Phase 2

**Má»¥c tiÃªu:** Má»Ÿ rá»™ng ERP thÃ nh há»‡ thá»‘ng káº¿ toÃ¡n tÆ°Æ¡ng Ä‘á»‘i Ä‘áº§y Ä‘á»§  
**Thá»i gian:** 64-81 giá» (~10 tuáº§n)  
**Tiá»n Ä‘á»:** Phase 1 hoÃ n thÃ nh 100%

---

## ğŸ“Š SÆ  Äá»’ Káº¾T Ná»I PHASE 2

```
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚                     PHASE 1 OUTPUTS                         â”‚
               â”‚  Transaction, Product, Partner, Worker, Account (seed)      â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              PHASE 2: TASK FLOW                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                  â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚    â”‚ TASK 1: Database Schema Phase 2                                    â”‚       â”‚
â”‚    â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                    â”‚       â”‚
â”‚    â”‚ New: Stock, StockMovement, ARTransaction, APTransaction,           â”‚       â”‚
â”‚    â”‚      VATDeclaration, UserSession, AuditLog                         â”‚       â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                             â”‚                                                    â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚
â”‚           â–¼                 â–¼                 â–¼                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚   â”‚ TASK 2       â”‚  â”‚ TASK 4       â”‚  â”‚ TASK 5       â”‚                          â”‚
â”‚   â”‚ Inventory    â”‚  â”‚ AR Module    â”‚  â”‚ AP Module    â”‚                          â”‚
â”‚   â”‚ Management   â”‚  â”‚ (Pháº£i thu)   â”‚  â”‚ (Pháº£i tráº£)   â”‚                          â”‚
â”‚   â”‚              â”‚  â”‚              â”‚  â”‚              â”‚                          â”‚
â”‚   â”‚ stockIn()    â”‚  â”‚ Tá»« P1 SALE   â”‚  â”‚ Tá»« P1 PURCH  â”‚                          â”‚
â”‚   â”‚ stockOut()   â”‚  â”‚ Migrate AR   â”‚  â”‚ Migrate AP   â”‚                          â”‚
â”‚   â”‚ avg cost     â”‚  â”‚              â”‚  â”‚              â”‚                          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚          â”‚                 â”‚                 â”‚                                   â”‚
â”‚          â–¼                 â–¼                 â–¼                                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚   â”‚ TASK 3       â”‚  â”‚ TASK 6: Accounting Reports       â”‚                        â”‚
â”‚   â”‚ Stock Report â”‚  â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•       â”‚                        â”‚
â”‚   â”‚ & Alerts     â”‚  â”‚ 8 bÃ¡o cÃ¡o káº¿ toÃ¡n chuáº©n VN:      â”‚                        â”‚
â”‚   â”‚              â”‚  â”‚ - Sá»• quá»¹ (TK 111, 112)           â”‚                        â”‚
â”‚   â”‚ Tá»“n kho      â”‚  â”‚ - Báº£ng kÃª HÄ mua/bÃ¡n             â”‚                        â”‚
â”‚   â”‚ tháº¥p â†’ Alert â”‚  â”‚ - Sá»• chi tiáº¿t 131, 331           â”‚                        â”‚
â”‚   â”‚              â”‚  â”‚ - BÃ¡o cÃ¡o NXT                    â”‚                        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ - Báº£ng CÄPS                      â”‚                        â”‚
â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                                      â”‚                                          â”‚
â”‚                                      â–¼                                          â”‚
â”‚                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚                     â”‚ TASK 7: Export Excel               â”‚                      â”‚
â”‚                     â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                  â”‚                      â”‚
â”‚                     â”‚ ExcelJS + Templates               â”‚                      â”‚
â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                       â”‚                                         â”‚
â”‚                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚                       â–¼                               â–¼                         â”‚
â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚               â”‚ TASK 8         â”‚              â”‚ TASK 9         â”‚                â”‚
â”‚               â”‚ VAT Declar.    â”‚              â”‚ Tax Package    â”‚                â”‚
â”‚               â”‚                â”‚              â”‚ Export ZIP     â”‚                â”‚
â”‚               â”‚ Input VAT      â”‚              â”‚                â”‚                â”‚
â”‚               â”‚ Output VAT     â”‚              â”‚ All reports +  â”‚                â”‚
â”‚               â”‚ XML TCT        â”‚              â”‚ Images â†’ ZIP   â”‚                â”‚
â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                       â”‚                                         â”‚
â”‚                                       â–¼                                         â”‚
â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚               â”‚ TASK 10: Security Enhancement                    â”‚               â”‚
â”‚               â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                    â”‚               â”‚
â”‚               â”‚ Session Management | Audit Log | Rate Limiting  â”‚               â”‚
â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”— Káº¾T Ná»I PHASE 1 â†’ PHASE 2

| Phase 1 (Input) | Phase 2 Task | Xá»­ lÃ½ |
|-----------------|--------------|-------|
| `Transaction.type=SALE` | Task 4 AR | Migrate sang ARTransaction |
| `Transaction.type=PURCHASE` | Task 5 AP | Migrate sang APTransaction |
| `Partner.balance_ar` | Task 4 | Import lÃ m opening balance |
| `Partner.balance_ap` | Task 5 | Import lÃ m opening balance |
| `Product` | Task 2 Inventory | Táº¡o Stock record cho má»—i SP |
| `Transaction + Items` | Task 2 | Tá»± Ä‘á»™ng táº¡o StockMovement |
| `Transaction.vat_amount` | Task 8 | TÃ­nh Input/Output VAT |
| `Account` (seed) | Task 6 Reports | Query theo TK káº¿ toÃ¡n |

---

## ğŸ“ CHI TIáº¾T TASKS Vá»šI CONNECTIONS

### Task 1: Database Schema Phase 2 (4-5h)
**Input:** P1 schema  
**Output:** New tables cho Stock, AR/AP, VAT, Security

### Task 2: Inventory Management (8-10h)
**Input:** P1 Products, P2 Task 1 Schema  
**Output:** Stock with Moving Average Cost  
**Logic:** Khi P1 Transaction.type = SALE/PURCHASE â†’ Auto create StockMovement

### Task 3: Stock Reports (4-5h)
**Input:** Task 2 Stock data  
**Output:** BÃ¡o cÃ¡o NXT, Tháº» kho, Cáº£nh bÃ¡o tá»“n tháº¥p

### Task 4: AR Module (6-8h)
**Input:** P1 Partner.balance_ar, P1 SALE transactions  
**Output:** ARTransaction records, Thu tiá»n allocation

### Task 5: AP Module (6-8h)
**Input:** P1 Partner.balance_ap, P1 PURCHASE transactions  
**Output:** APTransaction records, Tráº£ tiá»n allocation

### Task 6: Accounting Reports (10-12h)
**Input:** Task 2,3,4,5 data + P1 Transaction  
**Output:** 8 bÃ¡o cÃ¡o chuáº©n VN

### Task 7: Export Excel (4-5h)
**Input:** Task 6 reports  
**Output:** XLSX files vá»›i template Ä‘áº¹p

### Task 8: VAT Declaration (8-10h)
**Input:** P1 Transaction.vat_amount + Partner.tax_code  
**Output:** Tá» khai 01/GTGT XML

### Task 9: Tax Package Export (6-8h)
**Input:** All reports tá»« Task 6-8 + Invoice images  
**Output:** 1 file ZIP Ä‘áº§y Ä‘á»§ há»“ sÆ¡ thuáº¿

### Task 10: Security (8-10h)
**Input:** P1 Auth system  
**Output:** Session management, Audit logging

---

## ğŸ”— Káº¾T Ná»I PHASE 2 â†’ PHASE 3

| Phase 2 Output | Phase 3 Sá»­ dá»¥ng |
|----------------|-----------------|
| VAT Input/Output | Task 3 VAT Validation |
| Transaction data | Task 4 CIT Calculation |
| Security base | Task 8 Tax Compliance |

---

# ğŸ“‹ PHASE 3: TAX ENGINE + BCTC + TSCÄ

## ğŸ¯ Tá»•ng Quan Phase 3

**Má»¥c tiÃªu:** XÃ¢y dá»±ng Tax Engine thÃ´ng minh + BÃ¡o cÃ¡o tÃ i chÃ­nh  
**Thá»i gian:** 96-120 giá» (~8 tuáº§n)  
**Tiá»n Ä‘á»:** Phase 1 + Phase 2 hoÃ n thÃ nh

---

## ğŸ“Š SÆ  Äá»’ Káº¾T Ná»I PHASE 3

```
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚                     PHASE 2 OUTPUTS                         â”‚
               â”‚  VAT data, Stock, AR/AP, Reports, Security base             â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              PHASE 3: TAX ENGINE                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                  â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚    â”‚ TASK 1: Database Schema Phase 3                                    â”‚       â”‚
â”‚    â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                    â”‚       â”‚
â”‚    â”‚ New: tax_rules, cit_calculations, pit_calculations,                â”‚       â”‚
â”‚    â”‚      assets, depreciation_schedules, tax_schedules                 â”‚       â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                             â”‚                                                    â”‚
â”‚                             â–¼                                                    â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚    â”‚ TASK 2: Tax Rules Engine Core                                      â”‚       â”‚
â”‚    â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                      â”‚       â”‚
â”‚    â”‚ Rule evaluator | Condition parser | Action executor                â”‚       â”‚
â”‚    â”‚ Format: { condition: {...}, action: "ADD_BACK", value: 100% }      â”‚       â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                             â”‚                                                    â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚    â–¼                        â–¼                                        â–¼          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚ â”‚ TASK 3     â”‚     â”‚ TASK 4           â”‚    â”‚ TASK 7           â”‚                 â”‚
â”‚ â”‚ VAT Valid  â”‚     â”‚ CIT Calculation  â”‚    â”‚ PIT Calculation  â”‚                 â”‚
â”‚ â”‚            â”‚     â”‚                  â”‚    â”‚                  â”‚                 â”‚
â”‚ â”‚ TT219/TT96 â”‚     â”‚ Revenue - Expenseâ”‚    â”‚ 7 báº­c thuáº¿ suáº¥t  â”‚                 â”‚
â”‚ â”‚ Check      â”‚     â”‚ + Add-backs      â”‚    â”‚ Giáº£m trá»« 11tr    â”‚                 â”‚
â”‚ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â”‚ = Taxable Income â”‚    â”‚ NPT 4.4tr        â”‚                 â”‚
â”‚       â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚       â”‚                     â”‚                       â”‚                           â”‚
â”‚       â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚                           â”‚
â”‚       â”‚            â–¼                  â–¼             â”‚                           â”‚
â”‚       â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚                           â”‚
â”‚       â”‚     â”‚ TASK 5     â”‚    â”‚ TASK 6     â”‚        â”‚                           â”‚
â”‚       â”‚     â”‚ CIT XML    â”‚    â”‚ CIT UI     â”‚        â”‚                           â”‚
â”‚       â”‚     â”‚ 03/TNDN    â”‚    â”‚            â”‚        â”‚                           â”‚
â”‚       â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚                           â”‚
â”‚       â”‚                                             â”‚                           â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                         â–¼                                                        â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚    â”‚ TASK 8: Tax Compliance Dashboard                                    â”‚       â”‚
â”‚    â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                    â”‚       â”‚
â”‚    â”‚ Tá»•ng há»£p VAT + CIT + PIT | Lá»‹ch ná»™p thuáº¿ | Cáº£nh bÃ¡o háº¡n            â”‚       â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                             â”‚                                                    â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚    â–¼                                                                 â–¼          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ TASK 9           â”‚                                    â”‚ TASK 10          â”‚    â”‚
â”‚ â”‚ Hybrid Tax Sync  â”‚                                    â”‚ Fixed Assets     â”‚    â”‚
â”‚ â”‚                  â”‚                                    â”‚                  â”‚    â”‚
â”‚ â”‚ Weekly cron      â”‚                                    â”‚ TSCÄ Management  â”‚    â”‚
â”‚ â”‚ Update tax rules â”‚                                    â”‚ Monthly deprec.  â”‚    â”‚
â”‚ â”‚ from master JSON â”‚                                    â”‚ Auto GL posting  â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                  â”‚              â”‚
â”‚                                                                  â–¼              â”‚
â”‚                                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                                           â”‚ TASK 11: Financial Statements    â”‚  â”‚
â”‚                                           â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•     â”‚  â”‚
â”‚                                           â”‚ Balance Sheet | Income Statement â”‚  â”‚
â”‚                                           â”‚ Cash Flow | Thuyáº¿t minh BCTC     â”‚  â”‚
â”‚                                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                            â”‚                    â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚    â–¼                                                                            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚ â”‚ TASK 12: Cron Jobs & Integration Testing                                â”‚     â”‚
â”‚ â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                  â”‚     â”‚
â”‚ â”‚ Monthly depreciation | Daily tax reminders | Weekly tax sync | E2E testâ”‚     â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”— Káº¾T Ná»I PHASE 2 â†’ PHASE 3

| Phase 2 Output | Phase 3 Task | Xá»­ lÃ½ |
|----------------|--------------|-------|
| `VATDeclaration` data | Task 3 | Validate theo TT219/TT96 |
| `Transaction + vat` | Task 3, 4 | Input cho tax calculation |
| `Stock.avg_cost` | Task 4 CIT | TÃ­nh COGS cho chi phÃ­ |
| `ARTransaction` | Task 4 | Doanh thu cho CIT |
| `APTransaction` | Task 4 | Chi phÃ­ cho CIT |
| `Partner.tax_code` | Task 3 | Validate MST cho kháº¥u trá»« |

---

## ğŸ”— Káº¾T Ná»I PHASE 3 â†’ PHASE 4

| Phase 3 Output | Phase 4 Sá»­ dá»¥ng |
|----------------|-----------------|
| Tax Rules Engine | Task 10 Production Auth |
| Financial Statements | Task 7,8,9 Reports |
| Audit logging | Task 11 RBAC |
| Cron job infrastructure | Task 13 Monitoring |

---

# ğŸ“‹ PHASE 4: PRODUCTION READY

## ğŸ¯ Tá»•ng Quan Phase 4

**Má»¥c tiÃªu:** Production-ready vá»›i AR/AP Ä‘áº§y Ä‘á»§ + Infrastructure  
**Thá»i gian:** 136-168 giá» (~8 tuáº§n)  
**Tiá»n Ä‘á»:** Phase 1, 2, 3 hoÃ n thÃ nh

---

## ğŸ“Š SÆ  Äá»’ Káº¾T Ná»I PHASE 4

```
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚                     PHASE 3 OUTPUTS                         â”‚
               â”‚  Tax Engine, BCTC, Assets, Cron Jobs, Audit base            â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         PHASE 4: PRODUCTION READY                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ TASK 1: Database Schema Phase 4                                         â”‚    â”‚
â”‚  â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                         â”‚    â”‚
â”‚  â”‚ New: ar_invoices, ar_payments, ar_allocations,                          â”‚    â”‚
â”‚  â”‚      ap_invoices, ap_payments, credit_memos, failed_logins              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                    â”‚                                            â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚          â–¼                         â”‚                         â–¼                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚   â”‚               SPRINT 4.1: AR MODULE                                   â”‚      â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚      â”‚
â”‚   â”‚  â”‚ TASK 2   â”‚ â”‚ TASK 3     â”‚ â”‚ TASK 4       â”‚ â”‚ TASK 5           â”‚   â”‚      â”‚
â”‚   â”‚  â”‚ AR CRUD  â”‚â†’â”‚ AR Posting â”‚â†’â”‚ AR Payments  â”‚â†’â”‚ AR Aging Report  â”‚   â”‚      â”‚
â”‚   â”‚  â”‚ Invoice  â”‚ â”‚ â†’ GL       â”‚ â”‚ Allocation   â”‚ â”‚ 30/60/90/120 day â”‚   â”‚      â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                    â”‚                                            â”‚
â”‚                                    â–¼                                            â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚   â”‚               SPRINT 4.2: AP + REPORTS                                â”‚      â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚      â”‚
â”‚   â”‚  â”‚ TASK 6           â”‚  â”‚ TASK 7  â”‚ â”‚ TASK 8  â”‚ â”‚ TASK 9          â”‚   â”‚      â”‚
â”‚   â”‚  â”‚ AP Invoice+Pay   â”‚  â”‚ Balance â”‚ â”‚ P&L     â”‚ â”‚ Trial Balance   â”‚   â”‚      â”‚
â”‚   â”‚  â”‚ Full module      â”‚  â”‚ Sheet   â”‚ â”‚ TT200   â”‚ â”‚ General Ledger  â”‚   â”‚      â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                    â”‚                                            â”‚
â”‚                                    â–¼                                            â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚   â”‚               SPRINT 4.3: AUTH + INFRASTRUCTURE                       â”‚      â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚      â”‚
â”‚   â”‚  â”‚ TASK 10          â”‚  â”‚ TASK 11          â”‚  â”‚ TASK 12           â”‚   â”‚      â”‚
â”‚   â”‚  â”‚ Production Auth  â”‚â†’ â”‚ RBAC Multi-tenantâ”‚â†’ â”‚ AWS Infrastructureâ”‚   â”‚      â”‚
â”‚   â”‚  â”‚ JWT Refresh      â”‚  â”‚ Permissions      â”‚  â”‚ VPC/RDS/ECS/WAF   â”‚   â”‚      â”‚
â”‚   â”‚  â”‚ Brute Force Prot â”‚  â”‚ Tenant Switching â”‚  â”‚ Multi-region      â”‚   â”‚      â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚      â”‚
â”‚   â”‚                                                      â”‚               â”‚      â”‚
â”‚   â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚      â”‚
â”‚   â”‚                        â–¼                                             â”‚      â”‚
â”‚   â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚      â”‚
â”‚   â”‚               â”‚ TASK 13           â”‚                                  â”‚      â”‚
â”‚   â”‚               â”‚ CI/CD Monitoring  â”‚                                  â”‚      â”‚
â”‚   â”‚               â”‚ GitHub Actions    â”‚                                  â”‚      â”‚
â”‚   â”‚               â”‚ CloudWatch/Sentry â”‚                                  â”‚      â”‚
â”‚   â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                    â”‚                                            â”‚
â”‚                                    â–¼                                            â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚   â”‚               SPRINT 4.4: TESTING & UAT                               â”‚      â”‚
â”‚   â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚      â”‚
â”‚   â”‚               â”‚ TASK 14: E2E Tests + UAT             â”‚               â”‚      â”‚
â”‚   â”‚               â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•             â”‚               â”‚      â”‚
â”‚   â”‚               â”‚ Playwright | k6 load | OWASP ZAP    â”‚               â”‚      â”‚
â”‚   â”‚               â”‚ Parallel run with 3 pilot farms     â”‚               â”‚      â”‚
â”‚   â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”— Káº¾T Ná»I PHASE 3 â†’ PHASE 4

| Phase 3 Output | Phase 4 Task | Xá»­ lÃ½ |
|----------------|--------------|-------|
| `cit_calculations` | Task 7,8 | Data cho Balance Sheet, P&L |
| `assets + depreciation` | Task 7 | TÃ i sáº£n dÃ i háº¡n |
| `tax_schedules` | Task 10 | Integrate vÃ o auth |
| Audit logging | Task 11 RBAC | Extend permission audit |
| Cron infrastructure | Task 13 | Production cron setup |

---

## ğŸ”— Káº¾T Ná»I PHASE 4 â†’ PHASE 5

| Phase 4 Output | Phase 5 Sá»­ dá»¥ng |
|----------------|-----------------|
| RBAC system | Task 2-4 Payroll permissions |
| AWS Infrastructure | All tasks |
| CI/CD pipeline | Testing & deployment |
| Production Auth | Employee management |

---

# ğŸ“‹ PHASE 5: ADVANCED AUTO-BACKEND

## ğŸ¯ Tá»•ng Quan Phase 5

**Má»¥c tiÃªu:** Tá»± Ä‘á»™ng hÃ³a - User nháº­p Ã­t, há»‡ thá»‘ng tá»± tÃ­nh  
**Thá»i gian:** 96-120 giá» (~6 tuáº§n)  
**Triáº¿t lÃ½:** Tá»° Äá»˜NG 100%

---

## ğŸ“Š SÆ  Äá»’ Káº¾T Ná»I PHASE 5

```
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚                     PHASE 4 OUTPUTS                         â”‚
               â”‚  Production Auth, RBAC, AR/AP Full, Infrastructure, CI/CD   â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         PHASE 5: AUTO-BACKEND                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                  â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚    â”‚ TASK 1: Database Schema Phase 5                                    â”‚       â”‚
â”‚    â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                    â”‚       â”‚
â”‚    â”‚ New: employees, payrolls, tools, tool_allocations,                 â”‚       â”‚
â”‚    â”‚      budgets, budget_items, product_costs, notifications           â”‚       â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                             â”‚                                                    â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚    â–¼                                                                 â–¼          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚   â”‚               SPRINT 5.1: PAYROLL MODULE                              â”‚      â”‚
â”‚   â”‚                                                                       â”‚      â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚      â”‚
â”‚   â”‚  â”‚ TASK 2       â”‚     â”‚ TASK 3            â”‚     â”‚ TASK 4         â”‚   â”‚      â”‚
â”‚   â”‚  â”‚ Employee     â”‚â”€â”€â”€â”€â–¶â”‚ Payroll           â”‚â”€â”€â”€â”€â–¶â”‚ Payroll UI     â”‚   â”‚      â”‚
â”‚   â”‚  â”‚ CRUD         â”‚     â”‚ Auto-Calculate    â”‚     â”‚ & Reports      â”‚   â”‚      â”‚
â”‚   â”‚  â”‚              â”‚     â”‚                   â”‚     â”‚                â”‚   â”‚      â”‚
â”‚   â”‚  â”‚ NPT, BHXH    â”‚     â”‚ GROSS â†’ NET       â”‚     â”‚ Phiáº¿u lÆ°Æ¡ng    â”‚   â”‚      â”‚
â”‚   â”‚  â”‚ Contract     â”‚     â”‚ Auto calc:        â”‚     â”‚ Tá» khai TNCN   â”‚   â”‚      â”‚
â”‚   â”‚  â”‚              â”‚     â”‚ â€¢ BHXH 8%         â”‚     â”‚ Export Excel   â”‚   â”‚      â”‚
â”‚   â”‚  â”‚              â”‚     â”‚ â€¢ BHYT 1.5%       â”‚     â”‚                â”‚   â”‚      â”‚
â”‚   â”‚  â”‚              â”‚     â”‚ â€¢ BHTN 1%         â”‚     â”‚                â”‚   â”‚      â”‚
â”‚   â”‚  â”‚              â”‚     â”‚ â€¢ PIT 7 báº­c       â”‚     â”‚                â”‚   â”‚      â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                             â”‚                                                    â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚    â–¼                                                                 â–¼          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚   â”‚               SPRINT 5.2: CCDC + BUDGET                               â”‚      â”‚
â”‚   â”‚                                                                       â”‚      â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚      â”‚
â”‚   â”‚  â”‚ TASK 5            â”‚  â”‚ TASK 6            â”‚  â”‚ TASK 7         â”‚    â”‚      â”‚
â”‚   â”‚  â”‚ CCDC Auto-Alloc   â”‚  â”‚ Budget CRUD       â”‚  â”‚ Push Notif.    â”‚    â”‚      â”‚
â”‚   â”‚  â”‚                   â”‚  â”‚ & Monitoring      â”‚  â”‚                â”‚    â”‚      â”‚
â”‚   â”‚  â”‚ Input: 5tr/12th   â”‚  â”‚                   â”‚  â”‚ FCM/OneSignal  â”‚    â”‚      â”‚
â”‚   â”‚  â”‚ Cron monthly:     â”‚  â”‚ Limit per group   â”‚  â”‚                â”‚    â”‚      â”‚
â”‚   â”‚  â”‚ â†’ Auto GL entry   â”‚  â”‚ Real-time track   â”‚  â”‚ >80% â†’ âš ï¸     â”‚    â”‚      â”‚
â”‚   â”‚  â”‚ â†’ Update balance  â”‚  â”‚ Alert thresholds  â”‚  â”‚ >100% â†’ ğŸš¨    â”‚    â”‚      â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚      â”‚
â”‚   â”‚                                             â”‚                        â”‚      â”‚
â”‚   â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚      â”‚
â”‚   â”‚                        â–¼                                             â”‚      â”‚
â”‚   â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚      â”‚
â”‚   â”‚               â”‚ TASK 8            â”‚                                  â”‚      â”‚
â”‚   â”‚               â”‚ Budget Dashboard  â”‚                                  â”‚      â”‚
â”‚   â”‚               â”‚ Planned vs Actual â”‚                                  â”‚      â”‚
â”‚   â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                             â”‚                                                    â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚    â–¼                                                                 â–¼          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚   â”‚               SPRINT 5.3: COSTING + ANALYTICS                         â”‚      â”‚
â”‚   â”‚                                                                       â”‚      â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚      â”‚
â”‚   â”‚  â”‚ TASK 9            â”‚  â”‚ TASK 10           â”‚  â”‚ TASK 11        â”‚    â”‚      â”‚
â”‚   â”‚  â”‚ Cost Aggregation  â”‚  â”‚ Product Costing   â”‚  â”‚ Analytics      â”‚    â”‚      â”‚
â”‚   â”‚  â”‚                   â”‚  â”‚ UI                â”‚  â”‚ Dashboard      â”‚    â”‚      â”‚
â”‚   â”‚  â”‚ Group by product: â”‚  â”‚                   â”‚  â”‚                â”‚    â”‚      â”‚
â”‚   â”‚  â”‚ â€¢ Material cost   â”‚  â”‚ Cost breakdown    â”‚  â”‚ 6-month trend  â”‚    â”‚      â”‚
â”‚   â”‚  â”‚ â€¢ Labor cost      â”‚  â”‚ Profit margin     â”‚  â”‚ Top products   â”‚    â”‚      â”‚
â”‚   â”‚  â”‚ â€¢ Overhead        â”‚  â”‚ Loss warning âš ï¸   â”‚  â”‚ AI insights    â”‚    â”‚      â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚      â”‚
â”‚   â”‚                                                      â”‚               â”‚      â”‚
â”‚   â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚      â”‚
â”‚   â”‚                        â–¼                                             â”‚      â”‚
â”‚   â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚      â”‚
â”‚   â”‚               â”‚ TASK 12: Onboarding & Testing     â”‚                  â”‚      â”‚
â”‚   â”‚               â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•     â”‚                  â”‚      â”‚
â”‚   â”‚               â”‚ Tour hÆ°á»›ng dáº«n | E2E | Load test â”‚                  â”‚      â”‚
â”‚   â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”— Káº¾T Ná»I PHASE 4 â†’ PHASE 5

| Phase 4 Output | Phase 5 Task | Xá»­ lÃ½ |
|----------------|--------------|-------|
| RBAC permissions | Task 2-4 | Employee role permissions |
| GL Transaction service | Task 3, 5 | Auto posting payroll, CCDC |
| Production cron | Task 5, 9 | Monthly CCDC allocation, Cost aggregation |
| Push infra | Task 7 | Budget alerts |
| CI/CD | Task 12 | Testing pipeline |

---

## ğŸ”— Káº¾T Ná»I CÃC PHASES - Tá»”NG Há»¢P

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        LABA ERP - FULL PHASE CONNECTION                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚  PHASE 1: CORE ERP MINI (9 Tasks)                                              â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                               â”‚
â”‚  ğŸ—ï¸ Foundation: Schema, Auth, CRUD, Transaction, Workers, Dashboard            â”‚
â”‚           â”‚                                                                     â”‚
â”‚           â”‚ Outputs: Transaction service, Partner balances, Workers,           â”‚
â”‚           â”‚          Account chart, Tax rates, Product catalog                 â”‚
â”‚           â–¼                                                                     â”‚
â”‚  PHASE 2: INVENTORY + AR/AP (10 Tasks)                                         â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                          â”‚
â”‚  ğŸ“¦ Inventory: Stock, Moving Avg Cost, Reports                                 â”‚
â”‚  ğŸ’³ AR/AP: Migrate P1 balances, Payment tracking                               â”‚
â”‚  ğŸ“Š Reports: 8 VN accounting reports, VAT declaration                          â”‚
â”‚           â”‚                                                                     â”‚
â”‚           â”‚ Outputs: Stock system, VAT data, AR/AP transactions,               â”‚
â”‚           â”‚          Report templates, Security base                           â”‚
â”‚           â–¼                                                                     â”‚
â”‚  PHASE 3: TAX ENGINE + BCTC (12 Tasks)                                         â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                          â”‚
â”‚  ğŸ§® Tax Engine: Rules, VAT validation, CIT, PIT calculations                   â”‚
â”‚  ğŸ“‹ BCTC: Balance Sheet, P&L, Cash Flow                                        â”‚
â”‚  ğŸ­ Assets: Fixed assets, Auto depreciation                                    â”‚
â”‚           â”‚                                                                     â”‚
â”‚           â”‚ Outputs: Tax calculation services, Financial statements,           â”‚
â”‚           â”‚          Cron job infrastructure, Compliance dashboard             â”‚
â”‚           â–¼                                                                     â”‚
â”‚  PHASE 4: PRODUCTION READY (14 Tasks)                                          â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                          â”‚
â”‚  ğŸ“„ AR/AP Full: Invoice â†’ Payment â†’ Allocation â†’ Aging                         â”‚
â”‚  ğŸ”’ Auth: Production auth, RBAC, Multi-tenant                                  â”‚
â”‚  â˜ï¸ Infra: AWS VPC/RDS/ECS, CI/CD, Monitoring                                  â”‚
â”‚           â”‚                                                                     â”‚
â”‚           â”‚ Outputs: Production infrastructure, Full AR/AP,                    â”‚
â”‚           â”‚          RBAC system, Test coverage >80%                           â”‚
â”‚           â–¼                                                                     â”‚
â”‚  PHASE 5: AUTO-BACKEND (12 Tasks)                                              â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                              â”‚
â”‚  ğŸ’° Payroll Auto: BHXH/BHYT/BHTN/PIT auto from GROSS                           â”‚
â”‚  ğŸ”§ CCDC Auto: Monthly allocation, auto GL posting                             â”‚
â”‚  ğŸ“Š Budget: Real-time tracking, push alerts                                    â”‚
â”‚  ğŸ“ˆ Analytics: Product costing, profit analysis, AI insights                   â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

TOTAL: 57 TASKS across 5 PHASES
TIMELINE: ~34 weeks (8.5 months)
```

---

## âœ… VERIFICATION PLAN (ALL PHASES)

### Phase-level Verification

| Phase | Key Verification |
|-------|------------------|
| Phase 1 | Basic flows work, data saved correctly |
| Phase 2 | Stock balances correct, AR/AP matches |
| Phase 3 | Tax calculations = manual calc, XML validates |
| Phase 4 | Security audit pass, 1000 concurrent users |
| Phase 5 | Auto calculations = manual, <5s response |

### Integration Points to Test

1. **P1â†’P2:** Transaction creates StockMovement automatically
2. **P2â†’P3:** VAT data flows into VAT Validation
3. **P3â†’P4:** Tax calculations appear in Financial Reports
4. **P4â†’P5:** RBAC controls Payroll access

---

**PhiÃªn báº£n:** 2.0 (All Phases)  
**NgÃ y táº¡o:** 17/12/2024  
**TÃ¡c giáº£:** LABA Team
