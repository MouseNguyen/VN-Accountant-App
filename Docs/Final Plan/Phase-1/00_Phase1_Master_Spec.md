# ğŸ—ºï¸ PHASE 1 - MASTER SPECIFICATION

## Tá»•ng Quan Phase 1

| Má»¥c | Chi tiáº¿t |
|-----|----------|
| **Phase ID** | Phase 1 |
| **TÃªn** | Core ERP Mini - Foundation |
| **Sá»‘ Tasks** | 9 |
| **Thá»i gian** | 5-6 tuáº§n |
| **Phá»¥ thuá»™c** | KhÃ´ng cÃ³ (Phase Ä‘áº§u tiÃªn) |

---

## ğŸ“Š SÆ  Äá»’ CONNECTIONS GIá»®A TASKS

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              PHASE 1: CORE ERP MINI                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                           â”‚
â”‚   â”‚   P1-T1         â”‚                                                           â”‚
â”‚   â”‚   Database      â”‚â”€â”€â”€â”€ Schema cho TOÃ€N Bá»˜ Phase 1-2                         â”‚
â”‚   â”‚   Schema        â”‚                                                           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                           â”‚
â”‚            â”‚                                                                    â”‚
â”‚            â–¼                                                                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                           â”‚
â”‚   â”‚   P1-T2         â”‚                                                           â”‚
â”‚   â”‚   Authenticationâ”‚â”€â”€â”€â”€ JWT, Login/Register, Protected Routes                â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                           â”‚
â”‚            â”‚                                                                    â”‚
â”‚            â–¼                                                                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                           â”‚
â”‚   â”‚   P1-T3         â”‚                                                           â”‚
â”‚   â”‚   Farm/User     â”‚â”€â”€â”€â”€ Settings, Staff CRUD, Dynamic Labels                 â”‚
â”‚   â”‚   Management    â”‚                                                           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                           â”‚
â”‚            â”‚                                                                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”                                                           â”‚
â”‚   â–¼                 â–¼                                                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚
â”‚   â”‚   P1-T4         â”‚   â”‚   P1-T7         â”‚                                     â”‚
â”‚   â”‚   Products &    â”‚   â”‚   Workers &     â”‚                                     â”‚
â”‚   â”‚   Partners      â”‚   â”‚   PIT           â”‚                                     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚
â”‚            â”‚                     â”‚                                              â”‚
â”‚            â–¼                     â”‚ (Parallel branch)                            â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚                                              â”‚
â”‚   â”‚   P1-T5         â”‚            â”‚                                              â”‚
â”‚   â”‚   Transactions  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚
â”‚   â”‚   (Cash In/Out) â”‚                                                           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                           â”‚
â”‚            â”‚                                                                    â”‚
â”‚            â–¼                                                                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                           â”‚
â”‚   â”‚   P1-T6         â”‚                                                           â”‚
â”‚   â”‚   Sales &       â”‚                                                           â”‚
â”‚   â”‚   Purchases     â”‚                                                           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                           â”‚
â”‚            â”‚                                                                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”                                                           â”‚
â”‚   â–¼                 â–¼                                                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚
â”‚   â”‚   P1-T8         â”‚   â”‚   P1-T9         â”‚                                     â”‚
â”‚   â”‚   Dashboard &   â”‚   â”‚   OCR           â”‚                                     â”‚
â”‚   â”‚   Reports       â”‚   â”‚   Integration   â”‚                                     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚
â”‚                                                                                  â”‚
â”‚                           â”‚                                                      â”‚
â”‚                           â–¼                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚   â”‚                    OUTPUT TO PHASE 2                         â”‚               â”‚
â”‚   â”‚   Database Schema â†’ Extend with Inventory, AR/AP             â”‚               â”‚
â”‚   â”‚   Transaction â†’ Link to Stock Movements                      â”‚               â”‚
â”‚   â”‚   Partner.balance â†’ Migrate to AR/AP Transactions            â”‚               â”‚
â”‚   â”‚   VAT amounts â†’ VAT Declaration                              â”‚               â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‹ CHI TIáº¾T 9 TASKS

| Task | TÃªn | Inputs | Outputs | Verification |
|------|-----|--------|---------|--------------|
| T1 | Database Schema | - | All models, Seed data | `prisma generate` OK |
| T2 | Authentication | User model | JWT token, Auth store | Login/Register works |
| T3 | Farm/User Mgmt | Auth context | Settings UI, Staff CRUD | Update farm settings |
| T4 | Products/Partners | Farm context | CRUD APIs, UI | Add/Edit/Delete |
| T5 | Transactions | Products, Partners | Cash In/Out, Code gen | Transaction codes |
| T6 | Sales/Purchases | Transactions | Items, VAT calc, Balance | Partner balance update |
| T7 | Workers/PIT | - | Attendance, PIT calc | PIT quy táº¯c 2tr |
| T8 | Dashboard | All transactions | Charts, Summary | Totals match data |
| T9 | OCR | Transaction API | Invoice parser | Extract MST, Amount |

---

## ğŸ”— DEPENDENCIES MATRIX

```
          T1   T2   T3   T4   T5   T6   T7   T8   T9
T1  DB    â—    â†’    â†’    â†’    â†’    â†’    â†’    â†’    â†’
T2  AUTH  â—„    â—    â†’    â†’    â†’    â†’    â†’    â†’    â†’
T3  FARM  â—„    â—„    â—    â†’    â†’    -    -    -    -
T4  PROD  â—„    â—„    â—„    â—    â†’    â†’    -    -    -
T5  TXN   â—„    â—„    -    â—„    â—    â†’    â—„    â†’    â†’
T6  SALE  â—„    â—„    -    â—„    â—„    â—    -    â†’    -
T7  WORK  â—„    â—„    -    -    â—„    -    â—    â†’    -
T8  DASH  â—„    â—„    -    -    â—„    â—„    â—„    â—    -
T9  OCR   â—„    â—„    -    -    â—„    -    -    -    â—
```

---

## ğŸ“¤ OUTPUTS CHO PHASE 2

| Output | Phase 2 Input | Chi tiáº¿t |
|--------|---------------|----------|
| All database models | Schema extension | Add inventory, AR/AP tables |
| Transaction model | Stock movements | Auto create when sale/purchase |
| Partner.balance_ar/ap | AR/AP Transactions | Migrate to detailed records |
| VAT amounts | VAT Declaration | Aggregate for tax filing |
| OCR extracted MST | VAT validation | Verify tax codes |

---

## âœ… VERIFICATION PLAN

### Test Commands
```bash
npm run typecheck
npm run lint
npm run test
```

### Manual Test Scenarios
1. **Auth Flow**: Register â†’ Login â†’ Access Dashboard
2. **Master Data**: Add Product â†’ Add Partner â†’ Verify lists
3. **Transactions**: Thu tiá»n â†’ Chi tiá»n â†’ Check totals
4. **Sales/Purchases**: BÃ¡n hÃ ng + VAT â†’ Balance update
5. **Workers**: Cháº¥m cÃ´ng â†’ Thanh toÃ¡n â†’ PIT calculated
6. **Dashboard**: Verify all totals match

---

## ğŸ“… TIMELINE ESTIMATE

| Week | Tasks | Hours |
|------|-------|-------|
| 1 | T1, T2 | 6-8h |
| 2 | T3, T4 | 6-8h |
| 3 | T5, T6 | 11-14h |
| 4 | T7 | 5-6h |
| 5 | T8, T9 | 8-10h |
| **Total** | **9 Tasks** | **36-46h** |
